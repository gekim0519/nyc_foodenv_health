"0","# calculating the total number of restaurants and the number of fastfood restaurants in the neighborhood, as well as the percentage of fastfood restaurants."
"0","neighborhood_list = "
"0","  rest_neighborhood %>%"
"0","  distinct(neighborhood) %>%"
"0","  arrange(neighborhood)"
"0","  "
"0","rest_fastfood_neighborhood = "
"0","  rest_neighborhood %>%"
"0","  filter(cuisine_description %in% c(""Bagels/Pretzels"","
"0","                                    ""Bottled beverages, including water, sodas, juices, etc."","
"0","                                    ""Chicken"","
"0","                                    ""Delicatessen"","
"0","                                    ""Donuts"","
"0","                                    ""Hamburgers"","
"0","                                    ""Hotdogs"","
"0","                                    ""Hotdogs/Pretzels"","
"0","                                    ""Ice Cream, Gelato, Yogurt, Ices"","
"0","                                    ""Nuts/Confectionary"","
"0","                                    ""Pancakes/Waffles"","
"0","                                    ""Pizza"","
"0","                                    ""Soul Food"","
"0","                                    ""Sandwiches"","
"0","                                    ""Sandwiches/Salads/Mixed Buffet"","
"0","                                    ""Soups & Sandwiches""))"
"0",""
"0","percent_fastfood_neighborhood = function(name_neighborhood){"
"0",""
"0","  rest_each_neighborhood ="
"0","    rest_neighborhood %>%"
"0","    filter(neighborhood == name_neighborhood) %>%"
"0","    distinct(camis)"
"0","  "
"0","  n_rest_neighborhood = nrow(rest_each_neighborhood)"
"0",""
"0","  rest_fastfood_distinct_neighborhood = "
"0","    rest_fastfood_neighborhood %>%"
"0","    filter(neighborhood == name_neighborhood) %>%"
"0","    distinct(camis, cuisine_description)"
"0","  "
"0","  n_fastfood_neighborhood = nrow(rest_fastfood_distinct_neighborhood)"
"0","    "
"0","  percent_fastfood_neighborhood = n_fastfood_neighborhood/n_rest_neighborhood"
"0","  "
"0","  tibble("
"0","    neighborhood = name_neighborhood,"
"0","    n_fastfood = n_fastfood_neighborhood,"
"0","    n_rest = n_rest_neighborhood,"
"0","    percent_fastfood = percent_fastfood_neighborhood"
"0","  )"
"0","}"
"0",""
"0","fastfood_neighborhood = "
"0","  map(neighborhood_list$neighborhood, percent_fastfood_neighborhood) %>%"
"0","  bind_rows() %>%"
"0","  mutate(neighborhood = str_to_upper(neighborhood))"
"0",""
"0","# plot for each neighborhood"
"0","# fastfood_neighborhood %>%"
"0","#   mutate(neighborhood = as.factor(neighborhood),"
"0","#          n_rest = as.numeric(n_rest),"
"0","#          n_nonfastfood = n_rest - n_fastfood,"
"0","#          neighborhood = fct_reorder(neighborhood, percent_fastfood)) %>%"
"0","#   plot_ly(., x = ~neighborhood, y = ~n_fastfood, type = 'bar', name = 'fastfood restaurants') %>%"
"0","#   add_trace(y = ~n_nonfastfood, name = 'non-fastfood restaurants') %>%"
"0","#   layout(yaxis = list(title = 'Number of restaurants'), "
"0","#          xaxis = list(title = 'Neighborhood (ordered by percentage of fastfood restaurants)',"
"0","#                       showticklabels = FALSE),"
"0","#          barmode = 'stack')"
